import{j as t}from"./jsx-runtime.D_zvdyIk.js";import{r as s}from"./index.RH_Wq4ov.js";function m(){const[d,o]=s.useState([]),[a,n]=s.useState(""),[i,r]=s.useState(0),[h,l]=s.useState(!1);async function c(){l(!0);try{const x=await(await fetch("/api/materials")).json();o(x)}finally{l(!1)}}async function u(){a.trim()&&(await fetch("/api/materials",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:a,stock:i})}),n(""),r(0),c())}return s.useEffect(()=>{c()},[]),t.jsxs("div",{children:[t.jsxs("div",{style:{display:"flex",gap:8,marginBottom:12},children:[t.jsx("input",{value:a,onChange:e=>n(e.target.value),placeholder:"名称"}),t.jsx("input",{type:"number",value:i,onChange:e=>r(Number(e.target.value)),placeholder:"库存"}),t.jsx("button",{onClick:u,children:"新增"})]}),h?t.jsx("div",{children:"加载中..."}):t.jsxs("table",{className:"table",children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{children:"编号"}),t.jsx("th",{children:"名称"}),t.jsx("th",{children:"库存"})]})}),t.jsx("tbody",{children:d.map(e=>t.jsxs("tr",{children:[t.jsx("td",{children:e.id}),t.jsx("td",{children:e.name}),t.jsx("td",{children:e.stock})]},e.id))})]})]})}export{m as default};
